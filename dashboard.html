<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JosukeAI</title>

<style>
body{
background:#050816;
color:white;
font-family:Arial;
display:flex;
flex-direction:column;
height:100vh;
margin:0;
}
header{
background:#0f1433;
padding:15px;
display:flex;
justify-content:space-between;
align-items:center;
border-bottom:1px solid rgba(0,150,255,0.3);
}
h2{color:#00aaff;margin:0;}
#chat{
flex:1;
overflow:auto;
padding:20px;
display:flex;
flex-direction:column;
}
.msg{
margin-bottom:15px;
padding:12px;
border-radius:10px;
max-width:70%;
}
.user{
background:#007bff;
align-self:flex-end;
}
.bot{
background:#1a1f4d;
}
.inputBox{
display:flex;
padding:15px;
background:#0f1433;
}
input{
flex:1;
padding:10px;
border-radius:8px;
border:none;
background:#050816;
color:white;
}
button{
margin-left:10px;
padding:10px 20px;
border:none;
border-radius:8px;
background:linear-gradient(90deg,#007bff,#00aaff);
color:white;
cursor:pointer;
}
</style>
</head>
<body>

<header>
<h2>JosukeAI</h2>
<button onclick="logout()">Logout</button>
</header>

<div id="chat"></div>

<div class="inputBox">
<input type="text" id="message" placeholder="Tanya sesuatu...">
<button onclick="send()">Kirim</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut }
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "APIKEY_KAMU",
  authDomain: "josukeai.firebaseapp.com",
  projectId: "josukeai",
  appId: "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"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

onAuthStateChanged(auth,user=>{
  if(!user) window.location="login.html";
});

window.logout = ()=> signOut(auth).then(()=>window.location="login.html");

window.send = async ()=>{
  const text = message.value;
  if(!text) return;

  add(text,"user");
  message.value="";

  const res = await fetch("https://api.openai.com/v1/chat/completions",{
    method:"POST",
    headers:{
      "Content-Type":"application/json",
      "Authorization":"Bearer OPENAI_KEY_BARU"
    },
    body:JSON.stringify({
      model:"gpt-4o-mini",
      messages:[{role:"user",content:text}]
    })
  });

  const data = await res.json();
  add(data.choices[0].message.content,"bot");
}

function add(text,type){
  const div=document.createElement("div");
  div.className="msg "+type;
  div.innerText=text;
  chat.appendChild(div);
  chat.scrollTop=chat.scrollHeight;
}
</script>

</body>
</html>
